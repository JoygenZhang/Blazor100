export function init(i,r,u,f){console.log("init"+f);t=f;let e;const o=u.querySelector("[data-action=sourceSelect]"),c=u.querySelector("[data-action=sourceSelectPanel]"),s=u.querySelector("[data-action=option]");let h=u.querySelector("[data-action=startButton]"),l=u.querySelector("[data-action=resetButton]"),a=u.querySelector("[data-action=closeButton]");console.log("init"+h.innerHTML);n=new ZXing.BrowserMultiFormatReader;console.log("ZXing code reader initialized");n.getVideoInputDevices().then(t=>{function u(t){n.decodeOnceFromVideoDevice(e,"video").then(i=>{console.log(i);var u="vibrate"in navigator;if(u&&navigator.vibrate(1e3),t)return console.log("autostop"),n.reset(),r.invokeMethodAsync("GetResult",i.text);console.log("None-stop");n.reset();r.invokeMethodAsync("GetResult",i.text)}).catch(n=>{console.log(n),r.invokeMethodAsync("GetError",n+"")});console.log(`Started continous decode from camera with id ${e}`)}e=t[0].deviceId;console.log("videoInputDevices:"+t.length);t.length>1&&(t.forEach(n=>{s.text=n.label,s.value=n.deviceId,o.appendChild(s),e=n.deviceId}),o.onchange=()=>{e=o.value,n.reset(),u()},c.style.display="block");u(i);h.addEventListener("click",()=>{u()});l.addEventListener("click",()=>{n.reset(),console.log("Reset.")});a.addEventListener("click",()=>{n.reset(),console.log("closeButton."),r.invokeMethodAsync("CloseScan")})}).catch(n=>{console.log(n),r.invokeMethodAsync("GetError",n+"")})}export function destroy(i){undefined!==n&&null!==n&&t==i&&(n.reset(),n=null,console.log(t,"destroy"))}import"/lib/zxing/zxing.min.js";var n=null,t=null;